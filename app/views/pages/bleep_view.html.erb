<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto">
    <!-- Purpose Banner -->
    <div class="mb-6 p-4 bg-indigo-100 border-l-4 border-indigo-500 rounded shadow">
      <div class="flex items-center">
        <span class="text-2xl mr-3">üîä</span>
        <div>
          <h1 class="text-2xl font-bold mb-1">Transcribe and Bleep</h1>
          <p class="text-indigo-800">
            Process your <strong>entire audio or video file</strong>, censoring selected words with customizable matching and bleep sounds.
          </p>
        </div>
      </div>
    </div>

    <!-- Workflow Guidance -->
    <ol class="mb-6 pl-6 list-decimal text-gray-700">
      <li><span class="mr-1">üéµ</span><strong>Upload your file</strong> (audio or video).</li>
      <li><span class="mr-1">üó£Ô∏è</span><strong>Select language and model</strong> for transcription.</li>
      <li><span class="mr-1">üîä</span><strong>Choose bleep sound and words to censor.</strong></li>
      <li><span class="mr-1">üß©</span><strong>Pick matching modes</strong> (exact, partial, fuzzy).</li>
      <li><span class="mr-1">üëÄ</span><strong>Transcribe and preview/download the censored result.</strong></li>
    </ol>

    <!-- Link to Sampler -->
    <div class="mb-6 p-3 bg-blue-50 border border-blue-300 rounded flex items-center">
      <span class="mr-2">üí°</span>
      <span>
        Not sure which model to use? 
        <a href="/transcription-sampler-view" class="text-blue-700 underline font-semibold hover:text-blue-900">Try the Transcription Sampler</a>
        to compare models on a short snippet first.
      </span>
    </div>

    <!-- Existing form and controls -->
    <div class="bg-white shadow-md rounded-lg p-6">
      <!-- File Upload Area -->
      <div id="bleep-dropzone" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors">
        <p class="text-gray-600">Drag and drop your audio or video file here or click to browse</p>
        <input type="file" id="bleepFileInput" accept="audio/*,video/*" class="hidden">
      </div>
      <div id="bleepFileWarning" class="mt-2"></div>
      <!-- Language Selection -->
      <div class="mt-6">
        <label for="bleepLanguage" class="block text-sm font-medium text-gray-700 mb-2">Language</label>
        <select id="bleepLanguage" class="w-full p-2 border border-gray-300 rounded-md">
          <option value="en">English</option>
          <option value="es">Spanish</option>
          <option value="fr">French</option>
          <option value="de">German</option>
          <option value="it">Italian</option>
          <option value="pt">Portuguese</option>
          <option value="nl">Dutch</option>
          <option value="pl">Polish</option>
          <option value="ru">Russian</option>
          <option value="ja">Japanese</option>
          <option value="ko">Korean</option>
          <option value="zh">Chinese</option>
        </select>
      </div>
      <!-- Model Selection -->
      <div class="mt-6">
        <label for="bleepModel" class="block text-sm font-medium text-gray-700 mb-2">Model</label>
        <select id="bleepModel" class="w-full p-2 border border-gray-300 rounded-md">
          <option value="onnx-community/whisper-tiny_timestamped">Tiny (Smallest, fastest, least accurate)</option>
          <option value="onnx-community/whisper-base_timestamped">Base (Faster, less accurate)</option>
          <option value="onnx-community/whisper-small_timestamped" selected>Small (Balanced)</option>
          <option value="onnx-community/whisper-large-v3-turbo_timestamped">Large (Slowest, most accurate)</option>
        </select>
      </div>
      <!-- Bleep Sound Selection -->
      <div class="mt-6">
        <label for="bleepSound" class="block text-sm font-medium text-gray-700 mb-2">Bleep Sound</label>
        <select id="bleepSound" class="w-full p-2 border border-gray-300 rounded-md">
          <option value="">Select a bleep sound...</option>
        </select>
        <button id="bleepPreviewButton" type="button" class="mt-2 px-4 py-1 bg-gray-200 rounded hover:bg-gray-300">Preview</button>
        <span id="bleepSoundName" class="ml-2 text-sm text-gray-600"></span>
      </div>
      <!-- Input Preview Player (audio or video) -->
      <div id="bleepInputPreviewContainer" class="mt-6 hidden relative">
        <button id="bleepInputPreviewCloseBtn" type="button" aria-label="Close preview" class="absolute top-2 right-2 z-50 bg-white/80 rounded-full text-gray-700 hover:text-red-600 text-2xl font-bold focus:outline-none px-3 py-1 shadow">&times;</button>
        <!-- Player will be injected here by JS -->
      </div>
      <!-- Transcribe Button -->
      <div class="mt-6">
        <button id="transcribeAndBleepButton" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700">Transcribe</button>
      </div>
      <!-- Progress Bar Placeholder -->
      <div class="mt-6" id="bleepProgressContainer">
        <div class="w-full bg-gray-200 rounded-full h-2.5">
          <div id="bleepProgressBar" class="bg-indigo-600 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
        <div id="bleepProgressText" class="text-center text-sm text-gray-600 mt-2">0%</div>
      </div>
      <!-- Words to Censor and Matching Modes -->
      <div class="mt-6">
        <label for="bleepWords" class="block text-sm font-medium text-gray-700 mb-2">Words to Censor (comma or space separated)</label>
        <input type="text" id="bleepWords" class="w-full p-2 border border-gray-300 rounded-md" placeholder="e.g. damn, hell, shoot">
      </div>
      <div class="mt-4">
        <span class="block text-sm font-medium text-gray-700 mb-2">Matching Modes</span>
        <label class="inline-flex items-center mr-4">
          <input type="checkbox" id="matchExact" checked class="form-checkbox">
          <span class="ml-2">Exact</span>
        </label>
        <label class="inline-flex items-center mr-4">
          <input type="checkbox" id="matchPartial" class="form-checkbox">
          <span class="ml-2">Partial</span>
        </label>
        <label class="inline-flex items-center">
          <input type="checkbox" id="matchFuzzy" class="form-checkbox">
          <span class="ml-2">Fuzzy</span>
        </label>
      </div>
      <div id="fuzzyDistanceContainer" class="mt-2 hidden">
        <label for="fuzzyDistance" class="block text-xs text-gray-600">Fuzzy Distance (max edits)</label>
        <input type="number" id="fuzzyDistance" min="1" max="5" value="1" class="w-20 p-1 border border-gray-300 rounded-md text-sm">
      </div>
      <!-- Run Matching Button -->
      <div class="mt-4">
        <button id="runMatchingButton" class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700">Run Matching</button>
      </div>
      <!-- Matching Results -->
      <div class="mt-4" id="bleepMatchResults"></div>
      <!-- Censored Video Player -->
      <div class="mt-4 hidden" id="censoredVideoPlayerContainer"></div>
      <button id="downloadCensoredVideoButton" class="hidden bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mt-2">Download Censored Video</button>
      <!-- Censored Audio Player -->
      <div class="mt-4 hidden" id="censoredAudioPlayerContainer"></div>
      <!-- Results Placeholder -->
      <div class="mt-6" id="bleepResultsContainer">
        <!-- Processed audio player and download link will be inserted here -->
      </div>
    </div>
  </div>
</div> 