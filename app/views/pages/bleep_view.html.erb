<div class="editorial-section">
  <!-- Purpose Banner -->
  <div class="mb-8 flex items-center gap-3">
    <span class="inline-block align-middle" aria-label="Waveform icon">
      <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="14" width="4" height="8" rx="2" fill="#111"/>
        <rect x="8" y="10" width="4" height="16" rx="2" fill="#111"/>
        <rect x="14" y="6" width="4" height="24" rx="2" fill="#111"/>
        <rect x="20" y="10" width="4" height="16" rx="2" fill="#111"/>
        <rect x="26" y="14" width="4" height="8" rx="2" fill="#111"/>
      </svg>
    </span>
    <span class="text-2xl md:text-3xl" aria-label="Cursing emoji">ðŸ™Š</span>
    <h1 class="text-4xl md:text-5xl font-extrabold uppercase leading-tight tracking-tight text-black ml-4" style="line-height: 0.95;">Bleep Your Sh*t!</h1>
  </div>
  <div class="mb-8 p-3 bg-yellow-100 border-l-4 border-yellow-400">
    <span class="bg-pink-200 px-2 py-1 rounded font-bold">Process your entire audio or video file</span>, censoring selected words with customizable matching and bleep sounds.
  </div>

  <!-- Workflow Guidance -->
  <div class="mb-2 text-xs md:text-sm font-semibold text-gray-700 uppercase tracking-wide">How it works</div>
  <ol class="mb-8 pl-4 md:pl-6 list-decimal text-gray-900 text-base md:text-lg">
    <li><span class="bg-blue-100 text-blue-900 px-2 py-1 rounded">Upload your file</span> (audio or video).</li>
    <li><span class="bg-green-100 text-green-900 px-2 py-1 rounded">Select language and model</span> for transcription.</li>
    <li><span class="bg-indigo-100 text-indigo-900 px-2 py-1 rounded">Transcribe</span> your file to generate a word-level transcript.</li>
    <li><span class="bg-purple-100 text-purple-900 px-2 py-1 rounded">Enter words and matching modes</span> (exact, partial, fuzzy).</li>
    <li><span class="bg-pink-100 text-pink-900 px-2 py-1 rounded">Run matching</span> to find words to censor.</li>
    <li><span class="bg-yellow-100 text-yellow-900 px-2 py-1 rounded">Choose bleep sound</span> for censorship.</li>
    <li><span class="bg-violet-100 text-violet-900 px-2 py-1 rounded">Bleep That Sh*t! and preview/download the censored result.</span></li>
  </ol>

  <!-- Link to Sampler -->
  <div class="mb-8 p-3 bg-blue-50 border-l-4 border-blue-400 flex items-center">
    <span class="mr-2">ðŸ’¡</span>
    <span class="text-base">
      Not sure which model to use?
      <a href="/transcription-sampler-view" class="bg-blue-500 text-white px-2 py-1 rounded-full font-semibold hover:bg-blue-700 transition">Try the Transcription Sampler</a>
      to compare models on a short snippet first.
    </span>
  </div>

  <!-- Step 1: Upload File -->
  <section class="editorial-section border-l-4 border-blue-500 pl-4 mb-12">
    <div class="flex items-center mb-2">
      <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 font-bold text-base">1</span>
      <h2 class="text-2xl font-extrabold uppercase text-black">Upload Your File</h2>
    </div>
    <p class="mb-2 text-base text-blue-900">Audio (MP3) or Video (MP4) supported. Preview your input before processing.</p>
    <div id="bleep-dropzone" class="border-2 border-dashed border-gray-400 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors">
      <p class="text-gray-700 text-base">Drag and drop your audio or video file here or click to browse</p>
      <input type="file" id="bleepFileInput" accept="audio/*,video/*" class="hidden">
    </div>
    <div id="bleepFileWarning" class="mt-2"></div>
    <details id="bleepInputPreviewSection" class="mt-4 hidden">
      <summary class="cursor-pointer text-lg font-semibold text-gray-700 select-none">Preview Input File (Audio/Video)</summary>
      <div id="bleepInputPreviewContainer" class="mt-4"></div>
    </details>
  </section>

  <!-- Step 2: Select Language & Model -->
  <section class="editorial-section border-l-4 border-green-500 pl-4 mb-12">
    <div class="flex items-center mb-2">
      <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 font-bold text-base">2</span>
      <h2 class="text-2xl font-extrabold uppercase text-black">Select Language & Model</h2>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label for="bleepLanguage" class="block text-base font-medium text-gray-700 mb-2">Language</label>
        <select id="bleepLanguage" class="w-full p-2 border border-gray-400 rounded-md text-base">
          <option value="en">English</option>
          <option value="es">Spanish</option>
          <option value="fr">French</option>
          <option value="de">German</option>
          <option value="it">Italian</option>
          <option value="pt">Portuguese</option>
          <option value="nl">Dutch</option>
          <option value="pl">Polish</option>
          <option value="ru">Russian</option>
          <option value="ja">Japanese</option>
          <option value="ko">Korean</option>
          <option value="zh">Chinese</option>
        </select>
      </div>
      <div>
        <label for="bleepModel" class="block text-base font-medium text-gray-700 mb-2">Model</label>
        <select id="bleepModel" class="w-full p-2 border border-gray-400 rounded-md text-base">
          <option value="onnx-community/whisper-tiny_timestamped">Tiny (Smallest, fastest, least accurate)</option>
          <option value="onnx-community/whisper-base_timestamped">Base (Faster, less accurate)</option>
          <option value="onnx-community/whisper-small_timestamped" selected>Small (Balanced)</option>
          <option value="onnx-community/whisper-large-v3-turbo_timestamped">Large (Slowest, most accurate)</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Step 3: Transcribe -->
  <section class="editorial-section border-l-4 border-indigo-500 pl-4 mb-12">
    <div class="flex items-center mb-2">
      <span class="bg-indigo-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 font-bold text-base">3</span>
      <h2 class="text-2xl font-extrabold uppercase text-black">Transcribe</h2>
    </div>
    <button id="transcribeAndBleepButton" class="w-full bg-black text-white py-3 px-4 rounded-full hover:bg-gray-900 text-lg font-bold uppercase tracking-wider">Transcribe</button>
    <button id="cancelTranscriptionButton" class="w-full bg-red-500 text-white py-3 px-4 rounded-full hover:bg-red-600 mt-2 hidden text-lg font-bold uppercase tracking-wider">Cancel</button>
    <div class="mt-6" id="bleepProgressContainer">
      <div class="w-full bg-gray-200 rounded-full h-2">
        <div id="bleepProgressBar" class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
      </div>
      <div id="bleepProgressText" class="text-center text-base text-gray-600 mt-2">0%</div>
      <div id="chunkStepper" class="flex gap-1 justify-center mt-2"></div>
    </div>
    <details id="bleepTranscriptSection" class="mt-6 hidden">
      <summary class="cursor-pointer text-lg font-semibold text-gray-700 select-none">View Transcript & Word Timestamps</summary>
      <div id="bleepTranscriptContainer" class="mt-4"></div>
    </details>
  </section>

  <!-- Step 4: Enter Words & Matching Modes -->
  <section class="editorial-section border-l-4 border-purple-500 pl-4 mb-12">
    <div class="flex items-center mb-2">
      <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 font-bold text-base">4</span>
      <h2 class="text-2xl font-extrabold uppercase text-black">Enter Words & Matching Modes</h2>
    </div>
    <label for="bleepWords" class="block text-base font-medium text-gray-700 mb-2">Words to Censor (comma or space separated)</label>
    <input type="text" id="bleepWords" class="w-full p-2 border border-gray-400 rounded-md text-base" placeholder="e.g. damn, hell, shoot">
    <div class="mt-4">
      <span class="block text-base font-medium text-gray-700 mb-2">Matching Modes</span>
      <div class="mb-2 text-base text-gray-600">
        <span class="bg-yellow-100 px-2 py-1 rounded">Exact:</span> Only censors words that match exactly (e.g. "damn" matches only "damn").<br>
        <span class="bg-pink-100 px-2 py-1 rounded">Partial:</span> Censors words that contain the target as part of a larger word (e.g. "damn" matches "damnation").<br>
        <span class="bg-blue-100 px-2 py-1 rounded">Fuzzy:</span> Censors words that are similar to the target, allowing for typos or close spellings (e.g. "damn" matches "dam" or "damm").
      </div>
      <label class="inline-flex items-center mr-4">
        <input type="checkbox" id="matchExact" checked class="form-checkbox">
        <span class="ml-2">Exact</span>
      </label>
      <label class="inline-flex items-center mr-4">
        <input type="checkbox" id="matchPartial" class="form-checkbox">
        <span class="ml-2">Partial</span>
      </label>
      <label class="inline-flex items-center">
        <input type="checkbox" id="matchFuzzy" class="form-checkbox">
        <span class="ml-2">Fuzzy</span>
      </label>
    </div>
    <div id="fuzzyDistanceContainer" class="mt-2 hidden">
      <label for="fuzzyDistance" class="block text-base text-gray-600">Fuzzy Distance (max edits)</label>
      <input type="number" id="fuzzyDistance" min="1" max="5" value="1" class="w-20 p-1 border border-gray-400 rounded-md text-base">
    </div>
  </section>

  <!-- Step 5: Run Matching -->
  <section class="editorial-section border-l-4 border-pink-500 pl-4 mb-12">
    <div class="flex items-center mb-2">
      <span class="bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 font-bold text-base">5</span>
      <h2 class="text-2xl font-extrabold uppercase text-black">Run Matching</h2>
    </div>
    <button id="runMatchingButton" class="w-full bg-pink-500 text-white py-3 px-4 rounded-full hover:bg-pink-600 text-lg font-bold uppercase tracking-wider">Run Matching</button>
    <div id="bleepMatchCountMessage" class="mt-4"></div>
    <details id="bleepMatchResultsDetails" class="mt-4 hidden" open>
      <summary class="cursor-pointer text-lg font-semibold text-pink-700 select-none">Discovered Matches</summary>
      <div id="bleepMatchResults"></div>
    </details>
  </section>

  <!-- Step 6: Choose Bleep Sound -->
  <section class="editorial-section border-l-4 border-yellow-500 pl-4 mb-12">
    <div class="flex items-center mb-2">
      <span class="bg-yellow-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 font-bold text-base">6</span>
      <h2 class="text-2xl font-extrabold uppercase text-black">Choose Bleep Sound</h2>
    </div>
    <label for="bleepSound" class="block text-base font-medium text-gray-700 mb-2">Bleep Sound</label>
    <select id="bleepSound" class="w-full p-2 border border-gray-400 rounded-md text-base">
      <option value="">Select a bleep sound...</option>
    </select>
    <button id="bleepPreviewButton" type="button" class="mt-2 px-4 py-1 bg-gray-200 rounded hover:bg-gray-300 text-base">Preview</button>
    <span id="bleepSoundName" class="ml-2 text-base text-gray-600"></span>
  </section>

  <!-- Step 7: Bleep That Sh*t! -->
  <section class="editorial-section border-l-4 border-violet-500 pl-4 mb-12">
    <div class="flex items-center mb-2">
      <span class="bg-violet-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 font-bold text-base">7</span>
      <h2 class="text-2xl font-extrabold uppercase text-black">Bleep That Sh*t!</h2>
    </div>
    <button id="bleepAudioButton" class="w-full bg-violet-600 text-white py-3 px-4 rounded-full hover:bg-violet-700 text-lg font-bold uppercase tracking-wider" disabled>Bleep That Sh*t!</button>
    <!-- Progress bar for Step 7: Bleep That Sh*t! -->
    <div id="bleepStepProgressContainer" class="mt-4 hidden">
      <div class="w-full bg-gray-200 rounded-full h-2">
        <div id="bleepStepProgressBar" class="bg-violet-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
      </div>
      <div id="bleepStepProgressText" class="text-center text-base text-gray-600 mt-2">0%</div>
    </div>
    <!-- Censored Video Player -->
    <div class="mt-4 hidden" id="censoredVideoPlayerContainer"></div>
    <button id="downloadCensoredVideoButton" class="hidden bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mt-2 text-base">Download Censored Video</button>
    <!-- Censored Audio Player -->
    <div class="mt-4 hidden" id="censoredAudioPlayerContainer"></div>
    <!-- Results Placeholder -->
    <div class="mt-6" id="bleepResultsContainer">
      <!-- Processed audio player and download link will be inserted here -->
    </div>
  </section>
</div>
